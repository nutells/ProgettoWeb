<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            var vettore,i,ctx;
            function carica(){
                vettore=new Array();
                i=0;
                var img = new Image();
                img.src = document.getElementById("url").value;
                var can=document.getElementById("canvas");
                ctx = can.getContext("2d");
                ctx.drawImage(img,0,0);
                canvas.addEventListener('click', function(evt) {
                var rect=canvas.getBoundingClientRect()
                vettore[i]=evt.clientX-rect.left;
                vettore[i+1]=evt.clientY-rect.top;
                if(i===0)
                    ctx.moveTo(vettore[i],vettore[i+1]);
                else
                    {ctx.lineTo(vettore[i],vettore[i+1]);ctx.stroke();}
                i+=2;
                }, false);
            }
        function reset(){
            nuovo_elemento = document.createElement("div");
            nuovo_elemento.setAttribute("class","minilista");
            nuovo_elemento.innerHTML=vettore.toString();
            document.getElementById("contenitore").appendChild(nuovo_elemento);
            vettore=new Array();
            i=0;
        }
        
        
        </script>
    </head>
    <body>
        Se non appare l'immagine riaggiorna la pagina
        <input type=text value="ferrara/mappa.gif" id="url"/><button onclick="carica();">carica immagine</button>
        <br>  <canvas id="canvas" width="370" height="341"
                    style="border:1px solid #000000;">
        </canvas><br>
        <button onclick="reset();">Nuova area</button>
        <div id="contenitore"></div>
    </body>
</html>
